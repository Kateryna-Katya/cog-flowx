{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    // === 1. NAVIGATION LOGIC ===\n    const navMenu = document.getElementById('nav-menu');\n    const navToggle = document.getElementById('nav-toggle');\n    const navClose = document.getElementById('nav-close');\n    const navLinks = document.querySelectorAll('.header__link');\n    const header = document.querySelector('.header');\n\n    // Menu Toggle\n    if (navToggle) {\n        navToggle.addEventListener('click', () => navMenu.classList.add('active'));\n    }\n    if (navClose) {\n        navClose.addEventListener('click', () => navMenu.classList.remove('active'));\n    }\n    navLinks.forEach(link => {\n        link.addEventListener('click', () => navMenu.classList.remove('active'));\n    });\n\n    // Header Scroll Effect\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            header.style.boxShadow = \"0 4px 20px rgba(0,0,0,0.05)\";\n        } else {\n            header.style.boxShadow = \"none\";\n        }\n    });\n\n    // Footer Year\n    const yearSpan = document.getElementById('year');\n    if (yearSpan) yearSpan.textContent = new Date().getFullYear();\n\n    // === 2. COOKIE POPUP ===\n    const cookiePopup = document.getElementById('cookie-popup');\n    const cookieAccept = document.getElementById('cookie-accept');\n\n    // Check Local Storage\n    if (!localStorage.getItem('cookieAccepted')) {\n        setTimeout(() => {\n            if(cookiePopup) cookiePopup.classList.add('show');\n        }, 2000);\n    }\n\n    if (cookieAccept) {\n        cookieAccept.addEventListener('click', () => {\n            localStorage.setItem('cookieAccepted', 'true');\n            if(cookiePopup) cookiePopup.classList.remove('show');\n        });\n    }\n\n    // === 3. CONTACT FORM VALIDATION & LOGIC ===\n    const contactForm = document.getElementById('contact-form');\n    const phoneInput = document.getElementById('phone');\n    const phoneError = document.getElementById('phone-error');\n    const captchaInput = document.getElementById('captcha');\n    const captchaError = document.getElementById('captcha-error');\n    const captchaQuestion = document.getElementById('captcha-question');\n    const formMessage = document.getElementById('form-message');\n\n    // Generate Math Captcha\n    let num1 = Math.floor(Math.random() * 10) + 1;\n    let num2 = Math.floor(Math.random() * 10) + 1;\n    if (captchaQuestion) {\n        captchaQuestion.textContent = `${num1} + ${num2} = ?`;\n    }\n\n    // Phone Input Restrictions (Digits Only)\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n        });\n    }\n\n    if (contactForm) {\n        contactForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n            let isValid = true;\n            phoneError.textContent = \"\";\n            captchaError.textContent = \"\";\n            formMessage.textContent = \"\";\n            formMessage.className = \"form__message\";\n\n            // Validate Phone\n            if (phoneInput.value.length < 10) {\n                phoneError.textContent = \"Введите корректный номер\";\n                isValid = false;\n            }\n\n            // Validate Captcha\n            if (parseInt(captchaInput.value) !== (num1 + num2)) {\n                captchaError.textContent = \"Неверное решение\";\n                isValid = false;\n            }\n\n            if (isValid) {\n                // Simulate AJAX\n                const btn = contactForm.querySelector('button');\n                const originalText = btn.textContent;\n                btn.textContent = \"Отправка...\";\n                btn.disabled = true;\n\n                setTimeout(() => {\n                    formMessage.textContent = \"Спасибо! Мы свяжемся с вами через hello@cog-flowx.ink\";\n                    formMessage.classList.add('success');\n                    contactForm.reset();\n                    btn.textContent = originalText;\n                    btn.disabled = false;\n                    \n                    // Reset Captcha\n                    num1 = Math.floor(Math.random() * 10) + 1;\n                    num2 = Math.floor(Math.random() * 10) + 1;\n                    captchaQuestion.textContent = `${num1} + ${num2} = ?`;\n                }, 1500);\n            }\n        });\n    }\n});\n\n/* --- 4. GSAP ANIMATIONS (LOAD) --- */\nwindow.addEventListener('load', () => {\n    // Проверка наличия библиотек\n    if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') {\n        console.warn('GSAP not loaded');\n        return;\n    }\n\n    gsap.registerPlugin(ScrollTrigger);\n\n    // --- HERO ANIMATION ---\n    const heroTitle = document.querySelector('#hero-title');\n    if (heroTitle) {\n        // Проверяем, загрузился ли SplitType\n        if(typeof SplitType !== 'undefined') {\n            const myText = new SplitType('#hero-title', { types: 'words, chars' });\n            const tl = gsap.timeline({ defaults: { ease: \"power3.out\" } });\n\n            tl.from('.hero__badge', { y: -20, opacity: 0, duration: 0.8 })\n              .from('.stat-item', { y: 20, opacity: 0, duration: 0.6, stagger: 0.2 }, \"-=0.6\")\n              .from(myText.chars, { y: 100, opacity: 0, rotationZ: 10, stagger: 0.05, duration: 0.8 }, \"-=0.4\")\n              .from('.hero__desc', { y: 20, opacity: 0, duration: 0.6 }, \"-=0.4\")\n              .from('.hero__actions', { y: 20, opacity: 0, duration: 0.6 }, \"-=0.4\")\n              .to('.hero__curtain', { scaleY: 0, duration: 1.2, ease: \"power2.inOut\" }, \"-=1.0\")\n              .to('.hero__img', { scale: 1, duration: 1.5, ease: \"power2.out\" }, \"-=1.2\")\n              .from('.hero__circle-badge', { scale: 0, rotation: -180, opacity: 0, duration: 1, ease: \"back.out(1.7)\" }, \"-=0.8\");\n        } else {\n            // Фолбек если SplitType не загрузился\n            gsap.from('.hero__title', { y: 50, opacity: 0, duration: 1 });\n            gsap.to('.hero__curtain', { scaleY: 0, duration: 1.2 });\n        }\n          \n         // Mouse Move Parallax\n        const heroSection = document.querySelector('.hero');\n        const circleBadge = document.querySelector('.hero__circle-badge');\n        if (heroSection && circleBadge) {\n            heroSection.addEventListener('mousemove', (e) => {\n                const x = (e.clientX / window.innerWidth - 0.5) * 20;\n                const y = (e.clientY / window.innerHeight - 0.5) * 20;\n                gsap.to(circleBadge, { x: x, y: y, duration: 1, ease: \"power2.out\" });\n            });\n        }\n    }\n\n    // --- FIX: EXPERTISE ANIMATION (Cards) ---\n    // Используем autoAlpha вместо opacity для корректного рендеринга\n    const cards = gsap.utils.toArray('.card');\n    if(cards.length > 0) {\n        gsap.set(cards, { autoAlpha: 0, y: 50 }); // Сначала скрываем\n        \n        ScrollTrigger.batch(cards, {\n            start: \"top 90%\", // Начинаем, когда верх элемента на 90% экрана\n            onEnter: batch => gsap.to(batch, {\n                autoAlpha: 1, \n                y: 0, \n                stagger: 0.15, \n                duration: 0.8, \n                ease: \"power2.out\",\n                overwrite: true\n            })\n        });\n    }\n\n    // --- METHODOLOGY BLOCKS ---\n    const blocks = gsap.utils.toArray('.methodology__block');\n    if(blocks.length > 0) {\n        gsap.set(blocks, { autoAlpha: 0, x: -50 });\n        \n        ScrollTrigger.batch(blocks, {\n            start: \"top 85%\",\n            onEnter: batch => gsap.to(batch, {\n                autoAlpha: 1,\n                x: 0,\n                stagger: 0.2,\n                duration: 0.8,\n                ease: \"power2.out\"\n            })\n        });\n    }\n\n    // --- HORIZONTAL SCROLL (Innovations) ---\n    const innovationsSection = document.querySelector(\".innovations\");\n    const track = document.querySelector(\".innovations__track\");\n\n    // Запускаем только если секция и трек существуют и ширина экрана > 768px\n    if (innovationsSection && track && window.innerWidth > 768) {\n        \n        let sections = gsap.utils.toArray(\".innovations__item\");\n        \n        // Вычисляем, на сколько нужно сдвинуть трек влево\n        let scrollAmount = track.scrollWidth - window.innerWidth;\n\n        gsap.to(track, {\n            x: -scrollAmount, \n            ease: \"none\",\n            scrollTrigger: {\n                trigger: \".innovations\",\n                pin: true,        \n                pinSpacing: true, // Обязательно добавляем отступ снизу\n                scrub: 1,         \n                end: () => \"+=\" + (scrollAmount + 200), // Длина скролла\n                invalidateOnRefresh: true \n            }\n        });\n    }\n});"],"names":["navMenu","navToggle","navClose","navLinks","header","link","yearSpan","cookiePopup","cookieAccept","contactForm","phoneInput","phoneError","captchaInput","captchaError","captchaQuestion","formMessage","num1","num2","e","isValid","btn","originalText","myText","heroSection","circleBadge","x","y","cards","batch","blocks","innovationsSection","track","scrollAmount"],"mappings":"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"}